<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resources/config.js"></script>
<script type="text/javascript" src="resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
      <a href="https://github.com/JordanIschard/Mechanized-Wormholes"> Project </a>
      <a href="https://jordanischard.github.io/">Author</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Arith.Arith.html#"><span class="id" title="library">Arith</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">DeBrLevel</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">LevelInterface</span> <span class="id" title="library">ListLevel</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MMaps</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">MMaps</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Mecha</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Mecha.Syntax.Resource.html#"><span class="id" title="library">Resource</span></a> <a class="idref" href="Mecha.Syntax.Term.html#"><span class="id" title="library">Term</span></a> <a class="idref" href="Mecha.Syntax.Triplet.html#"><span class="id" title="library">Triplet</span></a> <a class="idref" href="Mecha.Environment.REnvironment.html#"><span class="id" title="library">REnvironment</span></a> <a class="idref" href="Mecha.Syntax.Cell.html#"><span class="id" title="library">Cell</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Mecha.Syntax.SyntaxNotation.html#"><span class="id" title="library">SyntaxNotation</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab33"></a><h1 class="section">Environment - Stock</h1>


<div class="paragraph"> </div>

  In the functional transition, there is an environment that saves the local resources and their initial expression. We define it as a list of triplets where a triplet is already defined in <span class="inlinecode"><a class="idref" href="Mecha.Syntax.Triplet.html#Triplet"><span class="id" title="module">Triplet</span></a></span> module. 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a id="Stock" class="idref" href="#Stock"><span class="id" title="module">Stock</span></a> &lt;: <span class="id" title="module">IsLvlET</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="Stock.RE" class="idref" href="#Stock.RE"><span class="id" title="module">RE</span></a> := <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment"><span class="id" title="module">REnvironment</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab34"></a><h2 class="section">Definitions</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Include</span> <span class="id" title="module">IsLvlListETWL</span> <a class="idref" href="Mecha.Syntax.Triplet.html#Triplet"><span class="id" title="module">Triplet</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab35"></a><h3 class="section">Get all keys</h3>


<div class="paragraph"> </div>

  It gets all keys in the triplet list and gathers them in a list.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Stock.keys" class="idref" href="#Stock.keys"><span class="id" title="definition">keys</span></a> (<a id="st:1" class="idref" href="#st:1"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :=<br/>
&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">((</span></a><a id="rg:3" class="idref" href="#rg:3"><span class="id" title="binder"><span id="pat:4" class="id">rg</span></span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">,</span></a><a id="rs:2" class="idref" href="#rs:2"><span class="id" title="binder"><span id="pat:4" class="id">rs</span></span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">),</span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">_</span></a><a id="pat:4" class="idref" href="#pat:4"><span class="id" title="binder">)</span></a> <a id="acc:5" class="idref" href="#acc:5"><span class="id" title="binder">acc</span></a> ⇒ <a class="idref" href="Mecha.Environment.Stock.html#rg:3"><span class="id" title="variable">rg</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Mecha.Environment.Stock.html#rs:2"><span class="id" title="variable">rs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Mecha.Environment.Stock.html#acc:5"><span class="id" title="variable">acc</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:1"><span class="id" title="variable">st</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab36"></a><h3 class="section">Definition of <span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a></span></h3>


<div class="paragraph"> </div>

  Acts the same that the <span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a></span> function from maps.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="Stock.max_key" class="idref" href="#Stock.max_key"><span class="id" title="definition">max_key</span></a> (<a id="st:6" class="idref" href="#st:6"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:9" class="idref" href="#pat:9"><span class="id" title="binder">((</span></a><a id="rg:8" class="idref" href="#rg:8"><span class="id" title="binder"><span id="pat:9" class="id">rg</span></span></a><a id="pat:9" class="idref" href="#pat:9"><span class="id" title="binder">,</span></a><a id="rs:7" class="idref" href="#rs:7"><span class="id" title="binder"><span id="pat:9" class="id">rs</span></span></a><a id="pat:9" class="idref" href="#pat:9"><span class="id" title="binder">),</span></a><a id="pat:9" class="idref" href="#pat:9"><span class="id" title="binder">_</span></a><a id="pat:9" class="idref" href="#pat:9"><span class="id" title="binder">)</span></a> <a id="acc:10" class="idref" href="#acc:10"><span class="id" title="binder">acc</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> <a class="idref" href="Mecha.Environment.Stock.html#rg:8"><span class="id" title="variable">rg</span></a> <a class="idref" href="Mecha.Environment.Stock.html#rs:7"><span class="id" title="variable">rs</span></a>) <a class="idref" href="Mecha.Environment.Stock.html#acc:10"><span class="id" title="variable">acc</span></a>) 0 <a class="idref" href="Mecha.Environment.Stock.html#st:6"><span class="id" title="variable">st</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Stock.new_key" class="idref" href="#Stock.new_key"><span class="id" title="definition">new_key</span></a> (<a id="st:11" class="idref" href="#st:11"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Mecha.Environment.Stock.html#st:11"><span class="id" title="variable">st</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>  ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:11"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab37"></a><h3 class="section">Initialize locals</h3>


<div class="paragraph"> </div>

  At the beginning of the temporal transition, the local resources are initialized thanks to the stock. For each triplet <span class="inlinecode">(<span class="id" title="var">r</span>,<span class="id" title="var">r'</span>,<span class="id" title="var">v</span>)</span>, <span class="inlinecode"><span class="id" title="var">r</span></span> is initialized as unused with <span class="inlinecode"><span class="id" title="var">v</span></span> and <span class="inlinecode"><span class="id" title="var">r'</span></span> is initialized as unused with <span class="inlinecode"><span class="id" title="var">unit</span></span>

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="Stock.init_locals" class="idref" href="#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> (<a id="st:13" class="idref" href="#st:13"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) (<a id="V:14" class="idref" href="#V:14"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Mecha.Environment.Stock.html#st:13"><span class="id" title="variable">st</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="Mecha.Environment.Stock.html#V:14"><span class="id" title="variable">V</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">r'</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">st'</span> ⇒ <a class="idref" href="Mecha.Environment.Stock.html#Stock.add"><span class="id" title="definition">RE.Raw.add</span></a> <span class="id" title="var">r</span> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.inp"><span class="id" title="constructor">Cell.inp</span></a> <span class="id" title="var">v</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.add"><span class="id" title="definition">RE.Raw.add</span></a> <span class="id" title="var">r'</span> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.inp"><span class="id" title="constructor">Cell.inp</span></a> <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#c0ee4f0613b8d4edc8b9716a750bcf8f"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="Mecha.Syntax.SyntaxNotation.html#:wh::'unit'"><span class="id" title="notation">unit</span></a><a class="idref" href="Mecha.Syntax.SyntaxNotation.html#c0ee4f0613b8d4edc8b9716a750bcf8f"><span class="id" title="notation">]&gt;</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#init_locals:15"><span class="id" title="definition">init_locals</span></a> <span class="id" title="var">st'</span> <a class="idref" href="Mecha.Environment.Stock.html#V:14"><span class="id" title="variable">V</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab38"></a><h3 class="section">Update locals</h3>


<div class="paragraph"> </div>

  At the end of the temporal transition, each expression bound to local resources is updated regards of the resource environment. If the writing resource is used then the expression is replaced by the new one, otherwise nothing changes.

</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="Stock.update_locals" class="idref" href="#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> (<a id="st:17" class="idref" href="#st:17"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) (<a id="V:18" class="idref" href="#V:18"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Mecha.Environment.Stock.html#st:17"><span class="id" title="variable">st</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">r'</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">st'</span> ⇒  <span class="id" title="keyword">match</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">r'</span> <a class="idref" href="Mecha.Environment.Stock.html#V:18"><span class="id" title="variable">V</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Mecha.Syntax.SyntaxNotation.html#3a26204d098591d10efaca876d00d22d"><span class="id" title="notation">⩽</span></a> <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#3a26204d098591d10efaca876d00d22d"><span class="id" title="notation">…</span></a> <span class="id" title="var">v'</span> <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#3a26204d098591d10efaca876d00d22d"><span class="id" title="notation">⩾</span></a>) ⇒  <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">r'</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v'</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#update_locals:19"><span class="id" title="definition">update_locals</span></a> <span class="id" title="var">st'</span> <a class="idref" href="Mecha.Environment.Stock.html#V:18"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">r</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">r'</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#update_locals:19"><span class="id" title="definition">update_locals</span></a> <span class="id" title="var">st'</span> <a class="idref" href="Mecha.Environment.Stock.html#V:18"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab39"></a><h3 class="section">Domain equality between stock and resource environment</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="Stock.eqDom'" class="idref" href="#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a> (<a id="V:21" class="idref" href="#V:21"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="W:22" class="idref" href="#W:22"><span class="id" title="binder">W</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="r:23" class="idref" href="#r:23"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>), <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:23"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:21"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:23"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:22"><span class="id" title="variable">W</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab40"></a><h2 class="section">Properties</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.app_not_nil" class="idref" href="#Stock.app_not_nil"><span class="id" title="lemma">app_not_nil</span></a> <a id="A:24" class="idref" href="#A:24"><span class="id" title="binder">A</span></a> (<a id="t1:25" class="idref" href="#t1:25"><span class="id" title="binder">t1</span></a> <a id="t2:26" class="idref" href="#t2:26"><span class="id" title="binder">t2</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Mecha.Environment.Stock.html#A:24"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#t1:25"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t2:26"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t1:25"><span class="id" title="variable">t1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t2:26"><span class="id" title="variable">t2</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.Wf_cons_1" class="idref" href="#Stock.Wf_cons_1"><span class="id" title="lemma">Wf_cons_1</span></a> (<a id="k:27" class="idref" href="#k:27"><span class="id" title="binder">k</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) <a id="p:28" class="idref" href="#p:28"><span class="id" title="binder">p</span></a> (<a id="t:29" class="idref" href="#t:29"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:27"><span class="id" title="variable">k</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#p:28"><span class="id" title="variable">p</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:29"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:27"><span class="id" title="variable">k</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:29"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">r</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">Hwf</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.shift_not_nil" class="idref" href="#Stock.shift_not_nil"><span class="id" title="lemma">shift_not_nil</span></a> <a id="m:30" class="idref" href="#m:30"><span class="id" title="binder">m</span></a> <a id="n:31" class="idref" href="#n:31"><span class="id" title="binder">n</span></a> <a id="t:32" class="idref" href="#t:32"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:31"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:30"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:32"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:32"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.shift_in_1" class="idref" href="#Stock.shift_in_1"><span class="id" title="lemma">shift_in_1</span></a> (<a id="m:33" class="idref" href="#m:33"><span class="id" title="binder">m</span></a> <a id="n:34" class="idref" href="#n:34"><span class="id" title="binder">n</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) <a id="r:35" class="idref" href="#r:35"><span class="id" title="binder">r</span></a> <a id="r1:36" class="idref" href="#r1:36"><span class="id" title="binder">r1</span></a> <a id="v:37" class="idref" href="#v:37"><span class="id" title="binder">v</span></a> (<a id="t:38" class="idref" href="#t:38"><span class="id" title="binder">t</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:35"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r1:36"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:37"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:38"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift"><span class="id" title="definition">Resource.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:33"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:34"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:35"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift"><span class="id" title="definition">Resource.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:33"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:34"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r1:36"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Syntax.Term.html#Term.shift"><span class="id" title="definition">Term.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:33"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:34"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:37"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:33"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:34"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:38"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">v'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">HIn</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.shift_in_2" class="idref" href="#Stock.shift_in_2"><span class="id" title="lemma">shift_in_2</span></a> (<a id="m:39" class="idref" href="#m:39"><span class="id" title="binder">m</span></a> <a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) <a id="r:41" class="idref" href="#r:41"><span class="id" title="binder">r</span></a> <a id="r1:42" class="idref" href="#r1:42"><span class="id" title="binder">r1</span></a> <a id="v:43" class="idref" href="#v:43"><span class="id" title="binder">v</span></a> (<a id="t:44" class="idref" href="#t:44"><span class="id" title="binder">t</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift"><span class="id" title="definition">Resource.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:39"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:41"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift"><span class="id" title="definition">Resource.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:39"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r1:42"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Syntax.Term.html#Term.shift"><span class="id" title="definition">Term.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:39"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:43"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:39"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:44"><span class="id" title="variable">t</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:41"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r1:42"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:43"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:44"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">v'</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_eq_iff"><span class="id" title="lemma">Resource.shift_eq_iff</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Mecha.Syntax.Term.html#Term.shift_eq_iff"><span class="id" title="lemma">Term.shift_eq_iff</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.shift_in_iff" class="idref" href="#Stock.shift_in_iff"><span class="id" title="lemma">shift_in_iff</span></a> (<a id="m:45" class="idref" href="#m:45"><span class="id" title="binder">m</span></a> <a id="n:46" class="idref" href="#n:46"><span class="id" title="binder">n</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) <a id="r:47" class="idref" href="#r:47"><span class="id" title="binder">r</span></a> <a id="r1:48" class="idref" href="#r1:48"><span class="id" title="binder">r1</span></a> <a id="v:49" class="idref" href="#v:49"><span class="id" title="binder">v</span></a> (<a id="t:50" class="idref" href="#t:50"><span class="id" title="binder">t</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:47"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r1:48"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:49"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:50"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift"><span class="id" title="definition">Resource.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:45"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:46"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:47"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift"><span class="id" title="definition">Resource.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:45"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:46"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r1:48"><span class="id" title="variable">r1</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Syntax.Term.html#Term.shift"><span class="id" title="definition">Term.shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:45"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:46"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:49"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:45"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:46"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:50"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift_in_1"><span class="id" title="lemma">shift_in_1</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HIn</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift_in_2"><span class="id" title="lemma">shift_in_2</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HIn</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab41"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a></span> properties</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.keys_In" class="idref" href="#Stock.keys_In"><span class="id" title="lemma">keys_In</span></a> (<a id="rr:51" class="idref" href="#rr:51"><span class="id" title="binder">rr</span></a> <a id="rw:52" class="idref" href="#rw:52"><span class="id" title="binder">rw</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="v:53" class="idref" href="#v:53"><span class="id" title="binder">v</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="definition">Λ</span></a>) (<a id="st:54" class="idref" href="#st:54"><span class="id" title="binder">st</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><a class="idref" href="Mecha.Environment.Stock.html#rr:51"><span class="id" title="variable">rr</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#rw:52"><span class="id" title="variable">rw</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:53"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:54"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#rr:51"><span class="id" title="variable">rr</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:54"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#rw:52"><span class="id" title="variable">rw</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:54"><span class="id" title="variable">st</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">rr</span> <span class="id" title="var">rw</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">rr</span> <span class="id" title="var">rw</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">r</span> <span class="id" title="var">r'</span>] <span class="id" title="var">v'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Heq</span>|<span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HIn</span> <span class="id" title="var">HIn'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.keys_in_app" class="idref" href="#Stock.keys_in_app"><span class="id" title="lemma">keys_in_app</span></a> (<a id="r:55" class="idref" href="#r:55"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="st:56" class="idref" href="#st:56"><span class="id" title="binder">st</span></a> <a id="st':57" class="idref" href="#st':57"><span class="id" title="binder">st'</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:55"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#st:56"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':57"><span class="id" title="variable">st'</span></a>)) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:55"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:56"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:55"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':57"><span class="id" title="variable">st'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span> <span class="id" title="var">st'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">st'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [|]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> [|[|<span class="id" title="var">HIn</span>]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> [[|[|]]|]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.keys_in_shift" class="idref" href="#Stock.keys_in_shift"><span class="id" title="lemma">keys_in_shift</span></a> (<a id="m:58" class="idref" href="#m:58"><span class="id" title="binder">m</span></a> <a id="n:59" class="idref" href="#n:59"><span class="id" title="binder">n</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="r:60" class="idref" href="#r:60"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="st:61" class="idref" href="#st:61"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:60"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:61"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="Mecha.Syntax.SyntaxNotation.html#7aa9049fc0a79ede43b60578980f910f"><span class="id" title="notation">[⧐</span></a><a class="idref" href="Mecha.Environment.Stock.html#m:58"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#7aa9049fc0a79ede43b60578980f910f"><span class="id" title="notation">–</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:59"><span class="id" title="variable">n</span></a><a class="idref" href="Mecha.Syntax.SyntaxNotation.html#7aa9049fc0a79ede43b60578980f910f"><span class="id" title="notation">]</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:60"><span class="id" title="variable">r</span></a>)%<span class="id" title="var">r</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:58"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:59"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:61"><span class="id" title="variable">st</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> [|[|<span class="id" title="var">HIn</span>]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intros</span> [|[|<span class="id" title="var">HIn</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_eq_iff"><span class="id" title="lemma">Resource.shift_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_eq_iff"><span class="id" title="lemma">Resource.shift_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.keys_in_shift_e" class="idref" href="#Stock.keys_in_shift_e"><span class="id" title="lemma">keys_in_shift_e</span></a> (<a id="m:62" class="idref" href="#m:62"><span class="id" title="binder">m</span></a> <a id="n:63" class="idref" href="#n:63"><span class="id" title="binder">n</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="r:64" class="idref" href="#r:64"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="st:65" class="idref" href="#st:65"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:64"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:62"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:63"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:65"><span class="id" title="variable">st</span></a>)) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="r':66" class="idref" href="#r':66"><span class="id" title="binder">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:64"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Syntax.SyntaxNotation.html#7aa9049fc0a79ede43b60578980f910f"><span class="id" title="notation">[⧐</span></a><a class="idref" href="Mecha.Environment.Stock.html#m:62"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#7aa9049fc0a79ede43b60578980f910f"><span class="id" title="notation">–</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:63"><span class="id" title="variable">n</span></a><a class="idref" href="Mecha.Syntax.SyntaxNotation.html#7aa9049fc0a79ede43b60578980f910f"><span class="id" title="notation">]</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r':66"><span class="id" title="variable">r'</span></a>)%<span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">Hc</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hc</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [|[| <span class="id" title="var">HIn</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">rg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">rs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.keys_in_new_key" class="idref" href="#Stock.keys_in_new_key"><span class="id" title="lemma">keys_in_new_key</span></a> (<a id="r:67" class="idref" href="#r:67"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="st:68" class="idref" href="#st:68"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:67"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:68"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:67"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:68"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [|[|<span class="id" title="var">HIn</span>]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab42"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a></span> and <span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a></span> properties</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.max_key_app" class="idref" href="#Stock.max_key_app"><span class="id" title="lemma">max_key_app</span></a> (<a id="st:69" class="idref" href="#st:69"><span class="id" title="binder">st</span></a> <a id="st':70" class="idref" href="#st':70"><span class="id" title="binder">st'</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#st:69"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':70"><span class="id" title="variable">st'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:69"><span class="id" title="variable">st</span></a>) (<a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':70"><span class="id" title="variable">st'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.new_key_app" class="idref" href="#Stock.new_key_app"><span class="id" title="lemma">new_key_app</span></a> (<a id="st:71" class="idref" href="#st:71"><span class="id" title="binder">st</span></a> <a id="st':72" class="idref" href="#st':72"><span class="id" title="binder">st'</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#st:71"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':72"><span class="id" title="variable">st'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:71"><span class="id" title="variable">st</span></a>) (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':72"><span class="id" title="variable">st'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key_app"><span class="id" title="lemma">max_key_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">st'</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg'</span> <span class="id" title="var">rs'</span>] <span class="id" title="var">v'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.new_key_cons" class="idref" href="#Stock.new_key_cons"><span class="id" title="lemma">new_key_cons</span></a> (<a id="r:73" class="idref" href="#r:73"><span class="id" title="binder">r</span></a> <a id="r':74" class="idref" href="#r':74"><span class="id" title="binder">r'</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="v:75" class="idref" href="#v:75"><span class="id" title="binder">v</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#8f9ca9cb3d78ac33d75e576570aeb27a"><span class="id" title="definition">Λ</span></a>) (<a id="st:76" class="idref" href="#st:76"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:73"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r':74"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:75"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:76"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#r:73"><span class="id" title="variable">r</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#r':74"><span class="id" title="variable">r'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:76"><span class="id" title="variable">st</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v'</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.max_key_shift_refl" class="idref" href="#Stock.max_key_shift_refl"><span class="id" title="lemma">max_key_shift_refl</span></a> (<a id="m:77" class="idref" href="#m:77"><span class="id" title="binder">m</span></a> <a id="n:78" class="idref" href="#n:78"><span class="id" title="binder">n</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="st:79" class="idref" href="#st:79"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#m:77"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:79"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:77"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:78"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:79"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:79"><span class="id" title="variable">st</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_wf_refl"><span class="id" title="lemma">Resource.shift_wf_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_wf_refl"><span class="id" title="lemma">Resource.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.Wf"><span class="id" title="definition">Resource.Wf</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.Wf"><span class="id" title="definition">Resource.Wf</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg'</span> <span class="id" title="var">rs'</span>] <span class="id" title="var">v'</span>]. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.new_key_shift_refl" class="idref" href="#Stock.new_key_shift_refl"><span class="id" title="lemma">new_key_shift_refl</span></a> (<a id="m:80" class="idref" href="#m:80"><span class="id" title="binder">m</span></a> <a id="n:81" class="idref" href="#n:81"><span class="id" title="binder">n</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="st:82" class="idref" href="#st:82"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#m:80"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:82"><span class="id" title="variable">st</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:80"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:81"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:82"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:82"><span class="id" title="variable">st</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key_shift_refl"><span class="id" title="lemma">max_key_shift_refl</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_wf_refl"><span class="id" title="lemma">Resource.shift_wf_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_wf_refl"><span class="id" title="lemma">Resource.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.Wf"><span class="id" title="definition">Resource.Wf</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.Wf"><span class="id" title="definition">Resource.Wf</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg'</span> <span class="id" title="var">rs'</span>] <span class="id" title="var">v'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.keys_in_shift_new_key" class="idref" href="#Stock.keys_in_shift_new_key"><span class="id" title="lemma">keys_in_shift_new_key</span></a> (<a id="n:83" class="idref" href="#n:83"><span class="id" title="binder">n</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="r:84" class="idref" href="#r:84"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="st:85" class="idref" href="#st:85"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:84"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:85"><span class="id" title="variable">st</span></a>) <a class="idref" href="Mecha.Environment.Stock.html#n:83"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:85"><span class="id" title="variable">st</span></a>)) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:84"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:85"><span class="id" title="variable">st</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_shift_e"><span class="id" title="lemma">keys_in_shift_e</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Heq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r'</span> ]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_shift"><span class="id" title="lemma">keys_in_shift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_new_key"><span class="id" title="lemma">keys_in_new_key</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_wf_refl"><span class="id" title="lemma">Resource.shift_wf_refl</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_new_key"><span class="id" title="lemma">keys_in_new_key</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_wf_refl"><span class="id" title="lemma">Resource.shift_wf_refl</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <span class="id" title="var">st</span>) <span class="id" title="var">n</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_shift"><span class="id" title="lemma">keys_in_shift</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab43"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a></span> properties</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.NoDup_keys_app" class="idref" href="#Stock.NoDup_keys_app"><span class="id" title="lemma">NoDup_keys_app</span></a> (<a id="st:86" class="idref" href="#st:86"><span class="id" title="binder">st</span></a> <a id="st':87" class="idref" href="#st':87"><span class="id" title="binder">st'</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:86"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':87"><span class="id" title="variable">st'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="r:88" class="idref" href="#r:88"><span class="id" title="binder">r</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:88"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':87"><span class="id" title="variable">st'</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:88"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:86"><span class="id" title="variable">st</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#st:86"><span class="id" title="variable">st</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st':87"><span class="id" title="variable">st'</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">st'</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">st'</span> <span class="id" title="var">HNoD1</span> <span class="id" title="var">HNoD2</span> <span class="id" title="var">Hdisj</span>.<br/>
&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoD1</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [| <span class="id" title="var">HIn</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_app"><span class="id" title="lemma">keys_in_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HIn</span>|<span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdisj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_app"><span class="id" title="lemma">keys_in_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">HIn</span>|<span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdisj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hdisj</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.NoDup_keys_shift" class="idref" href="#Stock.NoDup_keys_shift"><span class="id" title="lemma">NoDup_keys_shift</span></a> (<a id="m:89" class="idref" href="#m:89"><span class="id" title="binder">m</span></a> <a id="n:90" class="idref" href="#n:90"><span class="id" title="binder">n</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="st:91" class="idref" href="#st:91"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:91"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.shift"><span class="id" title="definition">shift</span></a> <a class="idref" href="Mecha.Environment.Stock.html#m:89"><span class="id" title="variable">m</span></a> <a class="idref" href="Mecha.Environment.Stock.html#n:90"><span class="id" title="variable">n</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:91"><span class="id" title="variable">st</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HNoD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoD</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [|<span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Syntax.Resource.html#Resource.shift_eq_iff"><span class="id" title="lemma">Resource.shift_eq_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_shift"><span class="id" title="lemma">keys_in_shift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Mecha.Environment.Stock.html#Stock.keys_in_shift"><span class="id" title="lemma">keys_in_shift</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab44"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a></span> properties</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_max_key" class="idref" href="#Stock.update_locals_max_key"><span class="id" title="lemma">update_locals_max_key</span></a> (<a id="V:92" class="idref" href="#V:92"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="t:93" class="idref" href="#t:93"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:93"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:92"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.max_key"><span class="id" title="definition">max_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:93"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rs</span> <span class="id" title="var">V</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ov</span>|]; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">ov</span>); <br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_new_key" class="idref" href="#Stock.update_locals_new_key"><span class="id" title="lemma">update_locals_new_key</span></a> (<a id="V:94" class="idref" href="#V:94"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="t:95" class="idref" href="#t:95"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:95"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:94"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:95"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rs</span> <span class="id" title="var">V</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ov</span>|]; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">ov</span>); <br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_max_key"><span class="id" title="lemma">update_locals_max_key</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_In" class="idref" href="#Stock.update_locals_In"><span class="id" title="lemma">update_locals_In</span></a> <a id="r:96" class="idref" href="#r:96"><span class="id" title="binder">r</span></a> <a id="r':97" class="idref" href="#r':97"><span class="id" title="binder">r'</span></a> <a id="v:98" class="idref" href="#v:98"><span class="id" title="binder">v</span></a> (<a id="V:99" class="idref" href="#V:99"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="t:100" class="idref" href="#t:100"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:96"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r':97"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:98"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:99"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:96"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r':97"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:98"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r':97"><span class="id" title="variable">r'</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:99"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.out"><span class="id" title="constructor">Cell.out</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:98"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v':101" class="idref" href="#v':101"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:96"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r':97"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#v':101"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r':97"><span class="id" title="variable">r'</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:99"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.out"><span class="id" title="constructor">Cell.out</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:98"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rw</span> <span class="id" title="var">V</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> <span class="id" title="var">r0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">HIn</span> <span class="id" title="var">Hneq</span>]|[<span class="id" title="var">v'</span> [<span class="id" title="var">HIn</span> <span class="id" title="var">Heq</span>]]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">v'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>; <span class="id" title="tactic">∃</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">HIn</span> <span class="id" title="var">Hneq</span>]|[<span class="id" title="var">v'</span> [<span class="id" title="var">HIn</span> <span class="id" title="var">Heq</span>]]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">v'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHt</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">HIn</span> <span class="id" title="var">Hneq</span>]|[<span class="id" title="var">v'</span> [<span class="id" title="var">HIn</span> <span class="id" title="var">Heq</span>]]]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">v'</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_keys_In" class="idref" href="#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a> <a id="r:102" class="idref" href="#r:102"><span class="id" title="binder">r</span></a> (<a id="V:103" class="idref" href="#V:103"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="t:104" class="idref" href="#t:104"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:102"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:104"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:103"><span class="id" title="variable">V</span></a>)) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:102"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:104"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rw</span> <span class="id" title="var">V</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">r0</span>); <span class="id" title="tactic">simpl</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> [|[|]]; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">right</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHt</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_NoDup_keys" class="idref" href="#Stock.update_locals_NoDup_keys"><span class="id" title="lemma">update_locals_NoDup_keys</span></a> (<a id="st:105" class="idref" href="#st:105"><span class="id" title="binder">st</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) <a id="V:106" class="idref" href="#V:106"><span class="id" title="binder">V</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:105"><span class="id" title="variable">st</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#st:105"><span class="id" title="variable">st</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:106"><span class="id" title="variable">V</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">st</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">p</span>]; <span class="id" title="tactic">intro</span> <span class="id" title="var">HND</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HND</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rw</span> <span class="id" title="var">V</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [|]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [|]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [|]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals_keys_In"><span class="id" title="lemma">update_locals_keys_In</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_Wf" class="idref" href="#Stock.update_locals_Wf"><span class="id" title="lemma">update_locals_Wf</span></a> (<a id="k:107" class="idref" href="#k:107"><span class="id" title="binder">k</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="V:108" class="idref" href="#V:108"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="W:109" class="idref" href="#W:109"><span class="id" title="binder">W</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:107"><span class="id" title="variable">k</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:109"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">RE.Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:107"><span class="id" title="variable">k</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:108"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:107"><span class="id" title="variable">k</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:109"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:108"><span class="id" title="variable">V</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf'</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf_cons"><span class="id" title="lemma">Wf_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf''</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rs</span> <span class="id" title="var">V</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfi</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>); <br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [|<span class="id" title="var">HIn</span>]; <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">IHW</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">auto</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">apply</span> <span class="id" title="var">Hwf</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.Wf_find"><span class="id" title="lemma">REnvironment.Wf_find</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Syntax.Cell.html#Cell.Wf"><span class="id" title="definition">Cell.Wf</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.update_locals_not_nil" class="idref" href="#Stock.update_locals_not_nil"><span class="id" title="lemma">update_locals_not_nil</span></a> <a id="t:110" class="idref" href="#t:110"><span class="id" title="binder">t</span></a> <a id="V:111" class="idref" href="#V:111"><span class="id" title="binder">V</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.update_locals"><span class="id" title="definition">update_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:110"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:111"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:110"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rw</span> <span class="id" title="var">V</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <span class="id" title="var">rw</span> <span class="id" title="var">V</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab45"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a></span> properties</h3>

</div>
<div class="code">

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="Stock.eqDom'_iff" class="idref" href="#Stock.eqDom'_iff"><span class="id" title="instance">eqDom'_iff</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.eq"><span class="id" title="definition">REnvironment.eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.eq"><span class="id" title="definition">eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">V</span> <span class="id" title="var">V1</span> <span class="id" title="var">HeqV</span> <span class="id" title="var">W</span> <span class="id" title="var">W1</span> <span class="id" title="var">HeqW</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.renvironment_in_iff"><span class="id" title="instance">RE.renvironment_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqV</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HeqV</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HeqW</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.renvironment_in_iff"><span class="id" title="instance">RE.renvironment_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HeqV</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">HeqV</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">HeqW</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.eqDom'_In" class="idref" href="#Stock.eqDom'_In"><span class="id" title="lemma">eqDom'_In</span></a> (<a id="r:112" class="idref" href="#r:112"><span class="id" title="binder">r</span></a>: <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="V:113" class="idref" href="#V:113"><span class="id" title="binder">V</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="W:114" class="idref" href="#W:114"><span class="id" title="binder">W</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:113"><span class="id" title="variable">V</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:114"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:112"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:113"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:112"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:114"><span class="id" title="variable">W</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HeqDom'</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.eqDom'_Empty" class="idref" href="#Stock.eqDom'_Empty"><span class="id" title="lemma">eqDom'_Empty</span></a> (<a id="V:115" class="idref" href="#V:115"><span class="id" title="binder">V</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="W:116" class="idref" href="#W:116"><span class="id" title="binder">W</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>):<br/>
&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:115"><span class="id" title="variable">V</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:116"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.Empty"><span class="id" title="definition">RE.Empty</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:115"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:116"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">HeqDom'</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HEmp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">V</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">HeqDom'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">HM</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<span class="id" title="var">HEmp</span> <span class="id" title="var">rg</span> <span class="id" title="var">v'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HIn</span> : (<a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <span class="id" title="var">x</span> <span class="id" title="var">V</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">v</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">HeqDom'</span> <span class="id" title="var">x</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="Stock.re_in_iff" class="idref" href="#Stock.re_in_iff"><span class="id" title="instance">re_in_iff</span></a> : <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.eq"><span class="id" title="definition">RE.eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> := <a class="idref" href="Mecha.Environment.Stock.html#Stock.renvironment_in_iff"><span class="id" title="instance">RE.renvironment_in_iff</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="Stock.re_new_eq" class="idref" href="#Stock.re_new_eq"><span class="id" title="instance">re_new_eq</span></a> : <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.eq"><span class="id" title="definition">RE.eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a>) (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">RE.Ext.new_key</span></a>) := <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key_eq"><span class="id" title="instance">RE.Ext.new_key_eq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.eqDom'_new_key" class="idref" href="#Stock.eqDom'_new_key"><span class="id" title="lemma">eqDom'_new_key</span></a> (<a id="V:117" class="idref" href="#V:117"><span class="id" title="binder">V</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="W:118" class="idref" href="#W:118"><span class="id" title="binder">W</span></a>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">t</span></a>):<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:118"><span class="id" title="variable">W</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'"><span class="id" title="definition">eqDom'</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:117"><span class="id" title="variable">V</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:118"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">RE.Ext.new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:117"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:118"><span class="id" title="variable">W</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">V</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">V</span> <span class="id" title="var">HNoD</span> <span class="id" title="var">HeqDom'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key_Empty"><span class="id" title="lemma">RE.Ext.new_key_Empty</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.eqDom'_Empty"><span class="id" title="lemma">eqDom'_Empty</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">Import</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment"><span class="id" title="module">REnvironment</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key_cons"><span class="id" title="lemma">new_key_cons</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HIn</span>: (<a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">V</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">HeqDom'</span> <span class="id" title="var">rg</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> <span class="id" title="var">HM</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.find_1"><span class="id" title="lemma">RE.find_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_id"><span class="id" title="lemma">RE.add_id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HM</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_remove_1"><span class="id" title="lemma">RE.add_remove_1</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">HIn</span>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <span class="id" title="var">rs</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.add"><span class="id" title="definition">RE.Raw.add</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">v'</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.remove"><span class="id" title="definition">RE.Raw.remove</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">V</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">HeqDom'</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v''</span> <span class="id" title="var">HM</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.find_1"><span class="id" title="lemma">RE.find_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_id"><span class="id" title="lemma">RE.add_id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">HM</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">clear</span> <span class="id" title="var">HM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_remove_1"><span class="id" title="lemma">RE.add_remove_1</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">HNoD</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span> <span class="id" title="var">HNoD</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Logic.Classical_Prop.html#not_or_and"><span class="id" title="lemma">Classical_Prop.not_or_and</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">HnIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.remove_add_2"><span class="id" title="lemma">RE.remove_add_2</span></a> <span class="id" title="tactic">in</span> × <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key_add_max"><span class="id" title="lemma">RE.Ext.new_key_add_max</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHW</span>;<span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<span class="id" title="var">HIn'</span>: <a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <span class="id" title="var">r</span>  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.add"><span class="id" title="definition">RE.Raw.add</span></a> <span class="id" title="var">rs</span> <span class="id" title="var">v''</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.add"><span class="id" title="definition">RE.Raw.add</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">v'</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Mecha.Environment.Stock.html#Stock.remove"><span class="id" title="definition">RE.Raw.remove</span></a> <span class="id" title="var">rs</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.remove"><span class="id" title="definition">RE.Raw.remove</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">V</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_in_iff"><span class="id" title="lemma">RE.add_in_iff</span></a>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HeqDom'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.remove_in_iff"><span class="id" title="lemma">RE.remove_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq'</span> <span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.remove_in_iff"><span class="id" title="lemma">RE.remove_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq''</span> <span class="id" title="var">HIn</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn'</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span>|[<span class="id" title="var">Hc</span>|]]; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">r</span> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">rg</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">rs</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">v</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">W</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">HeqDom'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_in_iff"><span class="id" title="lemma">RE.add_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hc</span>|[<span class="id" title="var">Hc</span>|<span class="id" title="var">HIn'</span>]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab46"></a><h3 class="section"><span class="inlinecode"><a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a></span> properties</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_in_iff" class="idref" href="#Stock.init_locals_in_iff"><span class="id" title="lemma">init_locals_in_iff</span></a> (<a id="r:119" class="idref" href="#r:119"><span class="id" title="binder">r</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#resource"><span class="id" title="definition">resource</span></a>) (<a id="W:120" class="idref" href="#W:120"><span class="id" title="binder">W</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">Stock.t</span></a>) (<a id="V:121" class="idref" href="#V:121"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:119"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:120"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:121"><span class="id" title="variable">V</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:119"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:120"><span class="id" title="variable">W</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:119"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:121"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_in_iff"><span class="id" title="lemma">RE.add_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [|[| <span class="id" title="var">HIn</span>]]; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHW</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [|]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_in_iff"><span class="id" title="lemma">RE.add_in_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [[|[|]]|]; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_new_key" class="idref" href="#Stock.init_locals_new_key"><span class="id" title="lemma">init_locals_new_key</span></a> (<a id="V:122" class="idref" href="#V:122"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="t:123" class="idref" href="#t:123"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">Stock.t</span></a>) : <br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">RE.Ext.new_key</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:123"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:122"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Peano.html#max"><span class="id" title="abbreviation">max</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:123"><span class="id" title="variable">t</span></a>) (<a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key"><span class="id" title="definition">RE.Ext.new_key</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:122"><span class="id" title="variable">V</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key_cons"><span class="id" title="lemma">new_key_cons</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.new_key_add_max"><span class="id" title="lemma">RE.Ext.new_key_add_max</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_Wf" class="idref" href="#Stock.init_locals_Wf"><span class="id" title="lemma">init_locals_Wf</span></a> (<a id="k:124" class="idref" href="#k:124"><span class="id" title="binder">k</span></a> : <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#lvl"><span class="id" title="definition">lvl</span></a>) (<a id="V:125" class="idref" href="#V:125"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="t:126" class="idref" href="#t:126"><span class="id" title="binder">t</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">Stock.t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">Stock.Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:124"><span class="id" title="variable">k</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:126"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">RE.Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:124"><span class="id" title="variable">k</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:125"><span class="id" title="variable">V</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf"><span class="id" title="definition">RE.Wf</span></a> <a class="idref" href="Mecha.Environment.Stock.html#k:124"><span class="id" title="variable">k</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#t:126"><span class="id" title="variable">t</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:125"><span class="id" title="variable">V</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf'</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf_cons"><span class="id" title="lemma">Wf_cons</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf''</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hwf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hwfrg</span> [<span class="id" title="var">Hwfrs</span> <span class="id" title="var">Hwfv</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf_add"><span class="id" title="lemma">RE.Wf_add</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Syntax.Cell.html#Cell.Wf"><span class="id" title="definition">Cell.Wf</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.Wf_add"><span class="id" title="lemma">RE.Wf_add</span></a>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_find_e" class="idref" href="#Stock.init_locals_find_e"><span class="id" title="lemma">init_locals_find_e</span></a> <a id="r:127" class="idref" href="#r:127"><span class="id" title="binder">r</span></a> <a id="c:128" class="idref" href="#c:128"><span class="id" title="binder">c</span></a>  (<a id="V:129" class="idref" href="#V:129"><span class="id" title="binder">V</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">RE.t</span></a>) (<a id="W:130" class="idref" href="#W:130"><span class="id" title="binder">W</span></a> : <a class="idref" href="Mecha.Environment.Stock.html#Stock.t"><span class="id" title="definition">Stock.t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:127"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:129"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Mecha.Environment.Stock.html#c:128"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v:131" class="idref" href="#v:131"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="Mecha.Environment.Stock.html#c:128"><span class="id" title="variable">c</span></a> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.inp"><span class="id" title="constructor">Cell.inp</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:131"><span class="id" title="variable">v</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:127"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:130"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:129"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Mecha.Environment.Stock.html#c:128"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v:132" class="idref" href="#v:132"><span class="id" title="binder">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="Mecha.Environment.Stock.html#c:128"><span class="id" title="variable">c</span></a> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.inp"><span class="id" title="constructor">Cell.inp</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:132"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">c</span> <span class="id" title="var">Hfi</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">Hfi'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_o"><span class="id" title="lemma">RE.add_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">rg</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfi'</span>; <span class="id" title="tactic">∃</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_o"><span class="id" title="lemma">RE.add_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">rs</span> <span class="id" title="var">r</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfi'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <a class="idref" href="Mecha.Syntax.SyntaxNotation.html#c0ee4f0613b8d4edc8b9716a750bcf8f"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="Mecha.Syntax.SyntaxNotation.html#:wh::'unit'"><span class="id" title="notation">unit</span></a><a class="idref" href="Mecha.Syntax.SyntaxNotation.html#c0ee4f0613b8d4edc8b9716a750bcf8f"><span class="id" title="notation">]&gt;</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHW</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_find_W" class="idref" href="#Stock.init_locals_find_W"><span class="id" title="lemma">init_locals_find_W</span></a> <a id="r:133" class="idref" href="#r:133"><span class="id" title="binder">r</span></a> <a id="v:134" class="idref" href="#v:134"><span class="id" title="binder">v</span></a> <a id="V:135" class="idref" href="#V:135"><span class="id" title="binder">V</span></a> <a id="W:136" class="idref" href="#W:136"><span class="id" title="binder">W</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="Mecha.Environment.Stock.html#Stock.In"><span class="id" title="definition">RE.Raw.In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:133"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:135"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:133"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:136"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:135"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.inp"><span class="id" title="constructor">Cell.inp</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:134"><span class="id" title="variable">v</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="r':137" class="idref" href="#r':137"><span class="id" title="binder">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:133"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r':137"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#v:134"><span class="id" title="variable">v</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:136"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v':138" class="idref" href="#v':138"><span class="id" title="binder">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Mecha.Environment.Stock.html#r':137"><span class="id" title="variable">r'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#r:133"><span class="id" title="variable">r</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Mecha.Environment.Stock.html#v':138"><span class="id" title="variable">v'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:136"><span class="id" title="variable">W</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="Mecha.Environment.Stock.html#v:134"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Mecha.Syntax.Term.html#Term.tm_unit"><span class="id" title="constructor">Term.tm_unit</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">v</span> <span class="id" title="var">HnIn</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">HnIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Mecha.Syntax.Cell.html#Cell.inp"><span class="id" title="constructor">Cell.inp</span></a> <span class="id" title="var">v</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.find_2"><span class="id" title="lemma">RE.find_2</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rg</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">rs</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">rg</span>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">v'</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHW</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfi</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfi</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r'</span> [<span class="id" title="var">HIn</span>| [<span class="id" title="var">v''</span> [<span class="id" title="var">HIn</span> <span class="id" title="var">Heq</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">∃</span> <span class="id" title="var">r'</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">r'</span>; <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">v''</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_find_V" class="idref" href="#Stock.init_locals_find_V"><span class="id" title="lemma">init_locals_find_V</span></a> <a id="r:139" class="idref" href="#r:139"><span class="id" title="binder">r</span></a> <a id="c:140" class="idref" href="#c:140"><span class="id" title="binder">c</span></a> <a id="V:141" class="idref" href="#V:141"><span class="id" title="binder">V</span></a> <a id="W:142" class="idref" href="#W:142"><span class="id" title="binder">W</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:139"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:142"><span class="id" title="variable">W</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:139"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:142"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:141"><span class="id" title="variable">V</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Mecha.Environment.Stock.html#c:140"><span class="id" title="variable">c</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.Stock.html#Stock.find"><span class="id" title="definition">RE.Raw.find</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:139"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:141"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Mecha.Environment.Stock.html#c:140"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v'</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHW</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">intro</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_unused" class="idref" href="#Stock.init_locals_unused"><span class="id" title="lemma">init_locals_unused</span></a> <a id="r:143" class="idref" href="#r:143"><span class="id" title="binder">r</span></a> <a id="W:144" class="idref" href="#W:144"><span class="id" title="binder">W</span></a> <a id="V:145" class="idref" href="#V:145"><span class="id" title="binder">V</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:143"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:144"><span class="id" title="variable">W</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:143"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:144"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:145"><span class="id" title="variable">V</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">V</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">V</span> <span class="id" title="var">r</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rg</span> <span class="id" title="var">rs</span>] <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heq</span> | [<span class="id" title="var">Heq</span> | <span class="id" title="var">HIn</span>]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a>, <a class="idref" href="Mecha.Syntax.Cell.html#Cell.opt_unused"><span class="id" title="definition">Cell.opt_unused</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rg</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a>, <a class="idref" href="Mecha.Syntax.Cell.html#Cell.opt_unused"><span class="id" title="definition">Cell.opt_unused</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a>, <a class="idref" href="Mecha.Syntax.Cell.html#Cell.opt_unused"><span class="id" title="definition">Cell.opt_unused</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a>, <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> (<span class="id" title="var">IHW</span> <span class="id" title="var">V</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">HIn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rg</span>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Mecha.Syntax.Resource.html#Resource.eq_dec"><span class="id" title="axiom">Resource.eq_dec</span></a> <span class="id" title="var">r</span> <span class="id" title="var">rs</span>); <span class="id" title="tactic">subst</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> (<span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a>, <a class="idref" href="Mecha.Syntax.Cell.html#Cell.opt_unused"><span class="id" title="definition">Cell.opt_unused</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a>, <a class="idref" href="Mecha.Syntax.Cell.html#Cell.opt_unused"><span class="id" title="definition">Cell.opt_unused</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a>, <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_eq_o"><span class="id" title="lemma">RE.add_eq_o</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a>, <a class="idref" href="Mecha.Syntax.Cell.html#Cell.opt_unused"><span class="id" title="definition">Cell.opt_unused</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="tactic">rewrite</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock.add_neq_o"><span class="id" title="lemma">RE.add_neq_o</span></a>; <span class="id" title="tactic">auto</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Stock.init_locals_unused_not" class="idref" href="#Stock.init_locals_unused_not"><span class="id" title="lemma">init_locals_unused_not</span></a> <a id="r:146" class="idref" href="#r:146"><span class="id" title="binder">r</span></a> <a id="W:147" class="idref" href="#W:147"><span class="id" title="binder">W</span></a> <a id="V:148" class="idref" href="#V:148"><span class="id" title="binder">V</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:146"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.keys"><span class="id" title="definition">keys</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:147"><span class="id" title="variable">W</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:146"><span class="id" title="variable">r</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:148"><span class="id" title="variable">V</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused"><span class="id" title="definition">unused</span></a> <a class="idref" href="Mecha.Environment.Stock.html#r:146"><span class="id" title="variable">r</span></a> (<a class="idref" href="Mecha.Environment.Stock.html#Stock.init_locals"><span class="id" title="definition">init_locals</span></a> <a class="idref" href="Mecha.Environment.Stock.html#W:147"><span class="id" title="variable">W</span></a> <a class="idref" href="Mecha.Environment.Stock.html#V:148"><span class="id" title="variable">V</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">W</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">r</span> <span class="id" title="var">HnIn</span> <span class="id" title="var">Hunsd</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">rr</span> <span class="id" title="var">rw</span>] <span class="id" title="var">v</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Logic.Classical_Prop.html#not_or_and"><span class="id" title="lemma">Classical_Prop.not_or_and</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HnIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq</span> <span class="id" title="var">HnIn</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.1/stdlib//Coq.Logic.Classical_Prop.html#not_or_and"><span class="id" title="lemma">Classical_Prop.not_or_and</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HnIn</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hneq'</span> <span class="id" title="var">HnIn</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused_add_neq"><span class="id" title="lemma">unused_add_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Mecha.Environment.REnvironment.html#REnvironment.unused_add_neq"><span class="id" title="lemma">unused_add_neq</span></a>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Mecha.Environment.Stock.html#Stock"><span class="id" title="module">Stock</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
